<?xml version="1.0"?>
<config type="database" id="db_usa">
  <objectType>cheshire3.database.SimpleDatabase</objectType>
  <paths>
    <path type="defaultPath">dbs/istc</path>
    <path type="metadataPath">stores/metadata.bdb</path>
    <object type="recordStore" ref="usaRecordStore"/>
    <object type="indexStore" ref="usaIndexStore"/>
    <object type="functionLogger" ref="defaultLogger"/>
  </paths>

  <subConfigs>
    
    <subConfig type="recordStore" id="usaRecordStore">
      <objectType>cheshire3.recordStore.BdbRecordStore</objectType>
      <paths>
      <path type="defaultPath">stores</path>
       <object type="idNormalizer" ref = "StringIntNormalizer"/>
       <object type="inTransformer" ref="XmlTransformer"/>
        <object type="outParser" ref="LxmlParser"/>
      </paths>
    </subConfig>

    <subConfig type="indexStore" id="usaIndexStore">
      <objectType>cheshire3.indexStore.BdbIndexStore</objectType>
      <paths>
         <path type="defaultPath">indexes</path>
         <path type="tempPath">temp</path>
         <path type="recordStoreHash">usaRecordStore</path>  
      </paths> 
    </subConfig>

    <subConfig type="protocolMap" id="CQLProtocolMap">
      <objectType>cheshire3.protocolMap.CQLProtocolMap</objectType>
      <paths>
         <path type="zeerexPath">zeerex_srw.xml</path>
      </paths>
    </subConfig>


 <!-- pre-parsers -->
            <subConfig type="preParser" id="emptyEmphTagStripPreParser">
                <objectType>cheshire3.preParser.RegexpSmashPreParser</objectType>
                <options>
                        <setting type="regexp">&lt;emph altrender="[a-z]"/&gt;</setting>
                </options>
            </subConfig>


            <subConfig type="preParser" id="AmpPreParser">
              <objectType>cheshire3.preParser.AmpPreParser</objectType>
            </subConfig>
         


    <subConfig type="index" id = "idx-usa-code">
      <objectType>cheshire3.index.SimpleIndex</objectType>
      <paths>
        <object type="indexStore" ref="usaIndexStore"/>
        <object type="recordStore" ref="usaRecordStore"/>
      </paths> 
      <source>
        <xpath>code</xpath>
        <process>
          <object type="extractor" ref="SimpleExtractor"/>
          <object type="normalizer" ref="CaseNormalizer"/>
          <object type="normalizer" ref="SpaceNormalizer"/>
	  <object type="normalizer" ref="DiacriticNormalizer"/>
        </process>
      </source>
    </subConfig>

  <subConfig type="index" id = "idx-usa-full">
      <objectType>cheshire3.index.SimpleIndex</objectType>
      <paths>
        <object type="indexStore" ref="usaIndexStore"/>
        <object type="recordStore" ref="usaRecordStore"/>
      </paths> 
      <source>
        <xpath>full</xpath>
        <process>
          <object type="extractor" ref="SimpleExtractor"/>
          <object type="normalizer" ref="CaseNormalizer"/>
          <object type="normalizer" ref="SpaceNormalizer"/>
	  <object type="normalizer" ref="DiacriticNormalizer"/>
        </process>
      </source>
      <options>
	<setting type="sortStore">1</setting>
      </options>
    </subConfig> 

     <subConfig type="index" id = "idx-usa-full-kwd">
      <objectType>cheshire3.index.SimpleIndex</objectType>
      <paths>
        <object type="indexStore" ref="usaIndexStore"/>
        <object type="recordStore" ref="usaRecordStore"/>
      </paths> 
      <source>
        <xpath>full</xpath>
        <process>
	  	  <object type="workflow" ref="KeywordExtractorWorkflow"/>
          <object type="normalizer" ref="CaseNormalizer"/>
          <object type="normalizer" ref="PossessiveNormalizer"/>
	  	  <object type="normalizer" ref="DiacriticNormalizer"/>
        </process>
      </source>
      <options>
	<setting type="sortStore">1</setting>
      </options>
    </subConfig>

    <!-- workflows - override default workflows -->
    <path type="includeConfigs">workflow.xml</path>
  </subConfigs>

</config>

